<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>NORD WHEEL - Авторизация</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="auth.css">
</head>
<body>
    <div class="container auth-container">
        <header>
            <div class="logo">
                <img src="jpeg/logonwnew.png" alt="NORD WHEEL" class="logo-image" onerror="this.style.display='none'">
                <span class="logo-text">NORD WHEEL</span>
            </div>
        </header>

        <main class="auth-main">
            <h1>Вход в систему</h1>
            
            <div class="auth-card" id="cachedCheckCard">
                <div class="auth-form">
                    <h3>Проверка авторизации</h3>
                    <div id="cachedStatus" class="auth-status loading">
                        Проверка сохраненного кода доступа...
                    </div>
                    <div id="cachedActions" style="display: none; margin-top: 20px;">
                        <button class="btn-auth" onclick="continueWithCachedCode()">Продолжить как <span id="cachedUserName"></span></button>
                        <button class="btn-secondary" onclick="showPhoneInput()">Войти под другим номером</button>
                    </div>
                </div>
            </div>
            

            <div class="auth-card" id="phoneInputCard" style="display: none;">
                <div class="auth-form">
                    <h3>Вход по номеру телефона</h3>
                    
                    <div class="input-group">
                        <input type="tel"
                               id="phoneNumber"
                               placeholder="+7 (900) 123-45-67"
                               maxlength="20"
                               inputmode="tel"
                               autocomplete="tel">
                    </div>
                
                    <button class="btn-auth" id="nextBtn" onclick="sendVerificationCode()">Далее</button>
                    
                    <div id="codeSection" style="display: none; margin-top: 25px;">
                        <div class="input-group">
                            <input type="text"
                                   id="verificationCode"
                                   placeholder="0000"
                                   maxlength="4"
                                   inputmode="numeric"
                                   pattern="[0-9]{4}"
                                   autocomplete="off"
                                   style="text-align: center; font-size: 24px; letter-spacing: 8px;">
                        </div>
                        

                        <button class="btn-auth" id="loginBtn" onclick="verifyCode()" disabled>Войти</button>
                    </div>
                    

                    <div id="successStep" style="display: none;">
                        <div style="font-size: 48px; margin: 15px 0;">✅</div>
                        <h3>Доступ предоставлен!</h3>
                        <p>Ваш код доступа:</p>
                        <div style="background: #f8f9fa; border: 2px dashed #27ae60; border-radius: 8px; padding: 15px; font-size: 24px; font-weight: bold; letter-spacing: 4px; margin: 20px 0; font-family: monospace;" id="generatedAccessCode"></div>
                        <button class="btn-auth" onclick="completeLogin()">Перейти к работе</button>
                    </div>
                    

                    <div id="deniedStep" style="display: none;">
                        <div style="font-size: 48px; margin: 15px 0;">❌</div>
                        <h3>Доступ запрещен</h3>
                        <p id="deniedMessage">Ваш номер не найден в системе</p>
                        <button class="btn-secondary" onclick="resetToPhoneInput()">Попробовать другой номер</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="auth-final.js"></script>
</body>
</html>